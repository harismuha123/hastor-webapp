<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="header">
                <h4 class="title">Izvještaji</h4>
                <p class="category">Izaberite jednu od kategorija</p>
            </div>
            <div class="card-header">
                <ul class="nav nav-tabs">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#aktivni">Aktivni</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#kompletirani" style="color:red;">Kompletirani</a>
                    </li>
                    <li class="nav-item" style="float:right;line-height:45px;">
                        <button type="button" onclick="fillList()" data-toggle="modal" class="add_report btn btn-success" data-target="#messageModal">
                            Dodaj izvještaj
                        </button>
                    </li>
                </ul>
            </div>
            <div class="card-body">
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="aktivni">
                        <ul class="list-group media-list media-list-stream">
                            <div class="content table-responsive table-full-width">
                                <table id="aktivni-table" class="table table-hover table-striped">
                                    <thead>
                                    <th>Ime</th>
                                    <th>Prezime</th>
                                    <th>Grad</th>
                                    <th>Adresa</th>
                                    <th>Datum</th>
                                    <th>Od</th>
                                    <th>Do</th>
                                    <th></th>
                                    <th></th>
                                    </thead>
                                    <tbody id="aktivni-body">

                                    </tbody>
                                </table>
                            </div>
                        </ul>
                    </div>
                    <div role="tabpanel" class="tab-pane fade in" id="kompletirani">
                        <ul class="list-group media-list media-list-stream">
                            <div class="content table-responsive table-full-width">
                                <table id="kompletirani-table" class="table table-hover table-striped">
                                    <thead>
                                    <th>Ime</th>
                                    <th>Prezime</th>
                                    <th>Grad</th>
                                    <th>Adresa</th>
                                    <th>Datum</th>
                                    <th>Od</th>
                                    <th>Do</th>
                                    <th></th>
                                    <th></th>
                                    </thead>
                                    <tbody id="kompletirani-body">

                                    </tbody>
                                </table>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>

    $(['aktivni', 'kompletirani']).each(function (index, name) {
        $('#'+name+'-table').DataTable({
            responsive: true,
            autoWidth: false,
            ajax:  {
                url: 'rest/'+name,
                dataSrc: 'reports',
                dom: 'rtip', // the "r" is for the "processing" message
                processing: true, // you have to set this to true as well
                serverSide: true
            },
            columns: [
                { data: "name" },
                { data: "surname" },
                { data: "city" },
                { data: "address" },
                { data: "for_date" },
                { data: "from_hour" },
                { data: "to_hour" },
                { data: "reservation_id",
                    render : function(data, type, row) {
                        return '<button id="'+ data +'" data-toggle="modal" class="check_button btn btn-primary" data-target="#messageModal">Pregledaj</button>'
                    }
                },
                { data: "reservation_id",
                    render : function(data, type, row) {
                        return '<button id="'+ data +'" class="delete_button btn btn-danger">Obriši</button>'
                    }
                }
            ]
        });
    });

    function fillList() {
        $.get("rest/potvrdjeni_studenti", function (data) {
            $('#vNames').empty();
            $.each(data, function (index, item) {
                $('#vNames').append(
                    $('<option></option>').val(item.reservation_id + " - " + item.name + " " + item.surname).html(item.reservation_id + " - " + item.name + " " + item.surname)
                );
            });
        });
    }


</script>